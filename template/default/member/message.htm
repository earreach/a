{template 'header', 'member'}
{load('member.css')}
<div class="menu">
<table cellpadding="0" cellspacing="0">
<tr>
<td class="tab" id="send"><a href="?action=send"><span>发送信件</span></a></td>
<td class="tab" id="inbox"><a href="?action=inbox"><span>收件箱</span></a></td>
<td class="tab" id="outbox"><a href="?action=outbox"><span>已发送</span></a></td>
<td class="tab" id="draft"><a href="?action=draft"><span>草稿箱</span></a></td>
<td class="tab" id="recycle"><a href="?action=recycle"><span>回收站</span></a></td>
<td class="tab" id="export"><a href="?action=export"><span>信件导出</span></a></td>
<td class="tab" id="empty"><a href="?action=empty"><span>信件清理</span></a></td>
</tr>
</table>
</div>
{if $action == 'send'}
<form method="post" action="?" id="dform" onsubmit="return check();">
<input type="hidden" name="forward" value="{$forward}"/>
<input type="hidden" name="action" value="{$action}"/>
<table cellpadding="10" cellspacing="1" class="tb">
{if $user}
<tr>
<td class="tl"><span class="f_red">*</span> 收件人</td>
<td class="tr">
	<div class="list-img">
	<a href="{userurl($user[username], 'file=space')}" rel="external"><img src="{useravatar($user[username], 'large')}" width="48" height="48" class="avatar"/><i class="userinfo-v{$user[validate]}" title="{valid_name($user[validate])}"></i></a>
	<ul>
	<li>{if $DT[follow]}<span class="f_r">{numtoread($user[fans])}粉丝</span>{/if}<a href="{userurl($user[username], 'file=space')}" rel="external"><strong>{$user[passport]}</strong></a></li>
	<li><span>{if $user[sign]}{$user[sign]}{else}没有留下签名~~{/if}</span></li>
	</ul>
	</div>
	<input type="hidden" name="post[touser]" id="touser" value="{$touser}"/> <span id="dtouser" class="f_red"></span>
</td>
</tr>
{else}
<tr>
<td class="tl"><span class="f_red">*</span> 收件人</td>
<td class="tr f_gray"><input type="text" size="70" name="post[touser]" id="touser" value="{$touser}"/><img src="{DT_STATIC}image/ico-fadd.png" title="选择好友" class="jc" onclick="Dwidget(AJPath+'?moduleid=2&action=choose&job=friend&from=message&fid=touser', '选择好友', 1000, 600);"/> <span id="dtouser" class="f_red"></span></td>
</tr>
<tr>
<td class="tl"></td>
<td class="ts">多个收件人请按空格键隔开 最多同时发送给{$MOD[maxtouser]}个收件人</td>
</tr>
{/if}
<tr>
<td class="tl"><span class="f_red">*</span> 标题</td>
<td class="tr"><input type="text" size="70" name="post[title]" id="title" value="{$title}"/> <span id="dtitle" class="f_red"></span></td>
</tr>
<tr>
<td class="tl"><span class="f_red">*</span> 内容</td>
<td class="tr"><textarea name="post[content]" id="content" class="dsn">{$content}</textarea>
{deditor($moduleid, 'content', 'Message', '100%', 200)}<br/><span id="dcontent" class="f_red"></span>
</td>
</tr>
<tr>
<td class="tl">选项</td>
<td class="tr">
<label><input type="checkbox" name="post[save]" id="save" value="1" onclick="if(this.checked){Dd('copy').checked=Dd('feedback').checked=false;}"/> 不发送，保存为草稿</label>
<label><input type="checkbox" name="post[copy]" id="copy" value="1" onclick="if(this.checked){Dd('save').checked=false;}"/> 保存到已发送</label>
<label><input type="checkbox" name="post[feedback]" id="feedback" value="1" onclick="if(this.checked){Dd('save').checked=false;}"/> 已读回执</label>
</td>
</tr>
{if $need_captcha}
<tr>
<td class="tl"><span class="f_red">*</span> 验证码</td>
<td class="tr">{template 'captcha', 'chip'} <span id="dcaptcha" class="f_red"></span></td>
</tr>
{/if}
</table>
<div class="sbt">
<input type="submit" name="submit" value=" 确 定 " class="btn_g"/> &nbsp; &nbsp;
<input type="button" value="取 消" class="btn" onclick="if(window.self != window.top){window.parent.cDialog();}else{history.back(-1);}"/>
</div>
{if $MG[message_limit]}
<div class="limit">
&nbsp;&nbsp;&nbsp;今日可发 <span class="f_b f_red">{$MG[message_limit]}</span> 次
&nbsp;&nbsp;&nbsp;当前已发 <span class="f_b">{$limit_used}</span> 次
&nbsp;&nbsp;&nbsp;还可以发 <span class="f_b f_blue">{$limit_free}</span> 次
</div>
{/if}
</form>
{load('clear.js')}
<script type="text/javascript">
function check() {
	var len;
	if(Dd('save').checked == false) {
		if(Dd('touser').value == '') {
			Dmsg('请填写收件人', 'touser');
			return false;
		}
		var max = {$MOD[maxtouser]};
		if(max && substr_count(Dd('touser').value, ' ') >= max) {
			Dmsg('最多可以选择'+max+'个收件人', 'touser');
			return false;
		}
	}
	len = Dd('title').value.length;
	if(len < 2) {
		Dmsg('标题不能少于2个字，当前已输入'+len+'个字', 'title');
		return false;
	}
	if(len > 60) {
		Dmsg('标题不能多于60个字，当前已输入'+len+'个字', 'title');
		return false;
	}
	len = EditorLen();
	if(len < 5) {
		Dmsg('内容不能少于5个字，当前已输入'+len+'个字', 'content');
		return false;
	}
	if(len > 5000) {
		Dmsg('内容不能多于5000个字，当前已输入'+len+'个字', 'content');
		return false;
	}
{if $need_captcha}
	f = 'captcha';
	if($('#c'+f).html().indexOf('ok.png') == -1) {
		Dmsg('请填写正确的验证码', f);
		return false;
	}
{/if}
	return true;
}
</script>
{elseif $action == 'edit'}
<form method="post" action="?" id="dform" onsubmit="return check();">
<input type="hidden" name="action" value="{$action}"/> 
<input type="hidden" name="itemid" value="{$itemid}"/> 
<table cellpadding="10" cellspacing="1" class="tb">
<tr>
<td class="tl"><span class="f_red">*</span> 收件人</td>
<td class="tr f_gray"><input type="text" size="70" name="post[touser]" id="touser" value="{$touser}"/><img src="{DT_STATIC}image/ico-fadd.png" title="选择好友" style="position:absolute;margin:0 0 0 -32px;padding:6px;cursor:pointer;" onclick="Dwidget('friend.php?action=widget', '选择好友', 800, 600);"/> <span id="dtouser" class="f_red"></span></td>
</tr>
<tr>
<td class="tl"></td>
<td class="ts">多个收件人请按空格键隔开 最多同时发送给{$MOD[maxtouser]}个收件人</td>
</tr>
<tr>
<td class="tl"><span class="f_red">*</span> 标题</td>
<td class="tr f_gray"><input type="text" size="70" name="post[title]" id="title" value="{$title}"/> <span id="dtitle" class="f_red"></span></td>
</tr>
<tr>
<td class="tl"><span class="f_red">*</span> 内容</td>
<td class="tr"><textarea name="post[content]" id="content" class="dsn">{$content}</textarea>
{deditor($moduleid, 'content', 'Simple', '100%', 200)}<br/><span id="dcontent" class="f_red"></span>
</td>
</tr>
<tr>
<td class="tl">选项</td>
<td class="tr">
<label><input type="checkbox" name="post[send]" id="sendmsg" value="1" onclick="if(!this.checked){Dd('copy').checked=Dd('feedback').checked=false;}"/> 发送信件</label>
<label><input type="checkbox" name="post[copy]" id="copy" value="1" onclick="if(this.checked){Dd('sendmsg').checked=true;}"/> 保存到已发送</label>
<label><input type="checkbox" name="post[feedback]" id="feedback" value="1" onclick="if(this.checked){Dd('sendmsg').checked=true;}"/> 已读回执</label>
</td>
</tr>
</table>
<div class="sbt"><input type="submit" name="submit" value=" 确 定 " class="btn_g"/>&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" value=" 返 回 " class="btn" onclick="history.back(-1);"/></div>
</form>
{load('clear.js')}
<script type="text/javascript">
function check() {
	var len;
	if(Dd('sendmsg').checked == true) {
		if(Dd('touser').value == '') {
			Dmsg('请填写收件人', 'touser');
			return false;
		}
		var max = {$MOD[maxtouser]};
		if(max && substr_count(Dd('touser').value, ' ') >= max) {
			Dmsg('最多可以选择'+max+'个收件人', 'touser');
			return false;
		}
	}
	len = Dd('title').value.length;
	if(len < 2) {
		Dmsg('标题不能少于2个字，当前已输入'+len+'个字', 'title');
		return false;
	}
	if(len > 60) {
		Dmsg('标题不能多于60个字，当前已输入'+len+'个字', 'title');
		return false;
	}
	len = EditorLen();
	if(len < 5) {
		Dmsg('内容不能少于5个字，当前已输入'+len+'个字', 'content');
		return false;
	}
	if(len > 5000) {
		Dmsg('内容不能多于5000个字，当前已输入'+len+'个字', 'content');
		return false;
	}
	return true;
}
</script>
{elseif $action == 'show'}
<style>
.message_head {border-bottom:#E8E8E8 1px solid;padding:0 16px 16px 16px;line-height:32px;}
.message_head h2 {font-size:16px;color:#000000;margin:0;}
.message_head span {color:#999999;padding:0 6px 0 2px;}
.message_head img {margin-right:10px;width:24px;height:24px;}
.message_head b {font-size:14px;color:#333333;}
.message_head .time {background:url('{DT_SKIN}ico-time.png') no-repeat 0 center;padding:0 10px 0 20px;}
.message_head .link {background:url('{DT_SKIN}ico-link.png') no-repeat 0 center;padding:0 10px 0 20px;}
.message_body {background:#FFFFFF;font-size:14px;line-height:180%;padding:16px 24px;}
.message_body a:link,.message_body a:visited,.message_body a:active {color:#1E5494;}
.message_foot {background:#F6F6F6;border-top:#E8E8E8 1px solid;padding:16px;}
.message_tips {padding:96px;text-align:center;font-size:16px;color:#666666;}
</style>
<div class="message_head">
	<h2>{$title}</h2>
	{if $status==4 || $status==3}
		{if $fromuser}
		<a href="{userurl($fromuser, 'file=space')}" target="_blank" title="收件人"><img src="{useravatar($fromuser)}" class="avatar" align="absmiddle"/><b>{if $fpassport}{$fpassport}{else}{$fromuser}{/if}</b></a>
		{else}
		<img src="{useravatar('')}" class="avatar" align="absmiddle"/><b>系统消息</b>
		{/if}
	{elseif $status==2 || $status==1}
		<a href="{userurl($touser, 'file=space')}" target="_blank" class="t px14" title="收件人"><img src="{useravatar($touser)}" class="avatar" align="absmiddle"/><b>{if $tpassport}{$tpassport}{else}{$touser}{/if}</b></a>
	{elseif $groupids}
		<img src="{useravatar('')}" class="avatar" align="absmiddle"/><b>系统广播</b>
	{/if}
	&nbsp;&nbsp;&nbsp;<span title="{$adddate}" class="time">{timetoread($addtime)}</span>
	{if $mid && $tid}&nbsp;&nbsp;&nbsp;<a href="{gourl('?mid='.$mid.'&itemid='.$tid)}" target="_blank"><span class="link">原文</span></a>{/if}
</div>
<div class="message_body">
{$content}
</div>
<div class="message_foot">
<input type="button" value="返 回" class="btn" onclick="Go('{$forward}');"/> &nbsp; &nbsp;
{if $status==4}
	<input type="button" class="btn" value="还 原" onclick="Go('?action=restore&itemid={$itemid}&forward={urlencode('?action=inbox')}');"/> &nbsp; &nbsp;
	{if $fromuser}
	<input type="button" class="btn" value="回 复" onclick="Go('?action=send&touser={$fromuser}&title=RE:{urlencode($title)}');"/> &nbsp; &nbsp;
	<input type="button" class="btn" value="往来信件" onclick="Go('?action=inbox&username={$fromuser}');"/> &nbsp; &nbsp;
	<input type="button" class="btn" value="转 发" onclick="Dd('_send').submit();"/> &nbsp; &nbsp;
	<input type="button" class="btn_r" value="拒 收" onclick="if(confirm('确定要删除此信件并将 {$fromuser} 加入黑名单吗？')) Go('?action=delete&itemid={$itemid}&job=black&forward={urlencode('?action=recycle')}');"/> &nbsp; &nbsp;
	{/if}
	<input type="button" class="btn_r" value="彻底删除" onclick="if(confirm('确定要删除此信件吗？此操作不可撤销')) Go('?action=delete&itemid={$itemid}&forward={urlencode('?action=recycle')}');"/> &nbsp; &nbsp;
{elseif $status==3}
	{if $fromuser}
	<input type="button" class="btn" value="回 复" onclick="Go('?action=send&touser={$fromuser}&title=RE:{urlencode($title)}');"/> &nbsp; &nbsp;
	<input type="button" class="btn" value="往来信件" onclick="Go('?action=inbox&username={$fromuser}');"/> &nbsp; &nbsp;
	<input type="button" class="btn" value="转 发" onclick="Dd('_send').submit();"/> &nbsp; &nbsp;	
	<input type="button" class="btn_r" value="拒 收" onclick="if(confirm('确定要删除此信件并将 {$fromuser} 加入黑名单吗？')) Go('?action=delete&itemid={$itemid}&job=black&forward={urlencode('?action=inbox')}');"/> &nbsp; &nbsp;
	{/if}
	<input type="button" class="btn_r" value="回收站" onclick="Go('?action=delete&itemid={$itemid}&recycle=1&forward={urlencode('?action=inbox')}');"/> &nbsp; &nbsp;
	<input type="button" class="btn_r" value="彻底删除" onclick="if(confirm('确定要删除此信件吗？此操作不可撤销')) Go('?action=delete&itemid={$itemid}&forward={urlencode('?action=inbox')}');"/> &nbsp; &nbsp;
{elseif $status==2}
	{if $fromuser}
	<input type="button" class="btn" value="转 发" onclick="Dd('_send').submit();"/> &nbsp; &nbsp;
	{/if}
	<input type="button" class="btn_r" value="彻底删除" onclick="if(confirm('确定要删除此信件吗？此操作不可撤销')) Go('?action=delete&itemid={$itemid}&forward={urlencode('?action=outbox')}');"/> &nbsp; &nbsp;
{elseif $status==1}
	{if $fromuser}
	<input type="button" class="btn" value="转 发" onclick="Dd('_send').submit();"/>&nbsp;
	{/if} 
	<input type="button" class="btn_r" value="彻底删除" onclick="if(confirm('确定要删除此信件吗？此操作不可撤销')) Go('?action=delete&itemid={$itemid}&forward={urlencode('?action=draft')}');"/> &nbsp; &nbsp;
{elseif $status==0}
{/if}
<form action="?" method="post" id="_send">
<input type="hidden" name="action" value="send"/>
<textarea name="title" class="dsn">{$title}</textarea>
<textarea name="content" class="dsn">{$content}</textarea>
</form>
</div>
{elseif $action == 'export'}
<form method="post" action="?">
<input type="hidden" name="mid" value="{$mid}"/>
<input type="hidden" name="action" value="{$action}"/>
<table cellpadding="10" cellspacing="1" class="tb">
<tr>
<td class="tl">提示</td>
<td class="tr f_red">&nbsp;请定期导出重要信件，以免被系统自动清除</td>
</tr>
<tr>
<td class="tl">信件</td>
<td class="tr">
<label><input type="radio" value="3" name="post[status]" checked="checked"/> 收件箱</label>
<label><input type="radio" value="2" name="post[status]" /> 已发送</label>
<label><input type="radio" value="1" name="post[status]" /> 草稿箱</label>
<label><input type="radio" value="4" name="post[status]" /> 回收站</label>
</td>
</tr>
<tr>
<td class="tl">时段</td>
<td class="tr">{dcalendar('post[fromdate]', $fromdate, '-', 1)} 至 {dcalendar('post[todate]', $todate, '-', 1)}</td>
</tr>
<tr>
<td class="tl"></td>
<td class="ts">每次最多导出100封，请设置合理的时间段，以免遗漏部分信件</td>
</tr>
<tr>
<td class="tl">选项</td>
<td class="tr"><label><input type="checkbox" value="1" name="post[isread]" /> 仅导出未读信件</label></td>
</tr>
</table>
<div class="sbt"><input type="submit" name="submit" value=" 导 出 " class="btn_g"/></div>
</form>
{elseif $action == 'empty'}
<form method="post" action="?">
<input type="hidden" name="mid" value="{$mid}"/>
<input type="hidden" name="action" value="{$action}"/>
<table cellpadding="10" cellspacing="1" class="tb">
<tr>
<td class="tl">信件</td>
<td class="tr">
<label><input type="radio" value="3" name="post[status]" checked="checked"/> 收件箱</label>
<label><input type="radio" value="2" name="post[status]" /> 已发送</label>
<label><input type="radio" value="1" name="post[status]" /> 草稿箱</label>
<label><input type="radio" value="4" name="post[status]" /> 回收站</label>
</td>
</tr>
<tr>
<td class="tl">时段</td>
<td class="tr">
{dcalendar('post[fromdate]', $fromdate, '-', 1)} 至 {dcalendar('post[todate]', $todate, '-', 1)}
</td>
</tr>
<tr>
<td class="tl">选项</td>
<td class="tr"><label><input type="checkbox" value="1" name="post[isread]" checked/> 保留未读信件</label></td>
</tr>
</table>
<div class="sbt"><input type="submit" name="submit" value=" 清 理 " class="btn_r" onclick="if(!confirm('确定要清理吗？此操作将不可撤销')) return false;"/></div>
</form>
{else}
<div class="tt">
<form action="?" id="search">
<input type="hidden" name="mid" value="{$mid}"/>
<input type="hidden" name="tid" value="{$tid}"/>
<input type="hidden" name="action" value="{$action}"/>
<input type="hidden" name="status" value="{$status}"/>
&nbsp;{$fields_select}&nbsp;
<input type="text" name="kw" value="{$kw}" size="30" title="关键词" placeholder="关键词"/>&nbsp;
{if $MOD[message_type]}
<select name="typeid">
<option value="-1">类型</option>
{loop $NAME $k $v}
<option value="{$k}"{if $k==$typeid} selected{/if}>{$v}</option>
{/loop}
</select>&nbsp;
{/if}
<select name="style">
<option value="">标记</option>
{loop $COLORS $v}
<option value="{$v}"{if $v==$style} selected{/if} style="background:#{$v};">&nbsp;</option>
{/loop}
</select>&nbsp;
{dcalendar('fromdate', $fromdate, '-', 1)} 至 {dcalendar('todate', $todate, '-', 1)}&nbsp;
<input type="submit" value=" 搜 索 " class="btn"/>&nbsp;
<input type="button" value=" 重 置 " class="btn" onclick="Go('?action={$action}');"/>
</form>
</div>
{if $MOD[message_type]}
<div class="nav">
<table cellpadding="0" cellspacing="0">
<tr>
<td class="{if $typeid==-1}nav_2{else}nav_1{/if}"><a href="?action={$action}">全部</a></td>
{loop $NAME $k $v}
<td class="{if $typeid==$k}nav_2{else}nav_1{/if}"><a href="?action={$action}&typeid={$k}">{$v}</a></td>
{/loop}
</tr>
</table>
</div>
{/if}
<form method="post">
<div class="ls">
<table cellpadding="10" cellspacing="0" class="tb">
<tr>
<th width="20"><input type="checkbox" onclick="checkall(this.form);" title="全选/反选"/></th>
<th width="28">类型</th>
<th width="80">{if $status>2}发件人{else}收件人{/if}</th>
<th>&nbsp;标题</th>
<th width="160" align="center">时间</th>
{if $status==3}<th width="80" align="center">标记</th>{/if}
</tr>
{if $status==3}
{loop $systems $v}
<tr align="center">
<td><input type="checkbox" disabled/></td>
<td><img src="{DT_STATIC}member/message_sys.gif" width="16" height="16" title="系统广播" alt=""/></td>
<td><img src="{useravatar('', 'large')}" width="48" height="48" class="avatar"/></td>
<td align="left">
<ul>
<li><a href="?action=show&itemid={$v[itemid]}"><span class="f_red" title="{$v[title]}">{$v[title]}</span></a></li>
<li class="f_gray">{$v[user]}</li>
</ul>
</td>
<td class="f_gray c_p" onclick="Dq('date', this.title);" title="{$v[adddate]}">{timetoread($v[addtime])}</td>
<td>--</td>
</tr>
{/loop}
{/if}
{loop $lists $v}
<tr align="center">
<td><input type="checkbox" name="itemid[]" value="{$v[itemid]}"/></td>
<td><a href="?action={$action}&typeid={$v[typeid]}"><img src="{DT_STATIC}member/message_{$v[typeid]}.gif" width="16" height="16" title="{$NAME[$v[typeid]]}" alt=""/></a></td>
<td>{if $v[userurl]}<a href="{$v[userurl]}" target="_blank">{/if}<img src="{useravatar($v[username], 'large')}" width="48" height="48" class="avatar"/>{if $v[userurl]}</a>{/if}</td>
<td align="left">
<ul>
<li><a href="{if $status==1}?action=edit&itemid={$v[itemid]}{else}?action=show&itemid={$v[itemid]}{/if}"{if $v[feedback]}onclick="if(confirm('该信件请求发送已读回执，是否发送？')){ Go(this.href+'&feedback=1');return false;}"{/if}{if $v[style]} style="color:#{$v[style]};"{/if} class="t{if !$v[isread]} f_b{/if}" title="{$v[alt]}&#10;编号：{$v[itemid]}">{$v[title]}</a></li>
<li class="f_gray">{$v[user]}</li>
</ul>
</td>
<td class="f_gray c_p" onclick="Dq('date', this.title);" title="{$v[adddate]}">{timetoread($v[addtime])}</td>
{if $status==3}
<td>
<select name="style" onchange="Go('?itemid={$v[itemid]}&action=color&style='+this.value);">
<option value="">标记</option>
<option value="">取消</option>
{$color_select}
</select>
</td>
{/if}
</tr>
{/loop}
</table>
<div class="btns">
<label><input type="checkbox" onclick="checkall(this.form);" title="全选/反选"/></label>
{if $status==4}
	<input type="submit" value=" 还 原 " class="btn" onclick="this.form.action='?action=restore';"/> &nbsp; &nbsp;
	<input type="submit" value=" 彻底删除 " class="btn_r" onclick="if(confirm('确定要删除选中信件吗？此操作不可撤销')){this.form.action='?action=delete';}else{return false;}"/> &nbsp; &nbsp;
	<input type="submit" value=" 清 空 " class="btn_r" onclick="if(confirm('确定要清空{$name}信件吗？此操作不可撤销')){this.form.action='?action=clear&status={$status}';}else{return false;}"/> &nbsp; &nbsp;
{elseif $status==3}
	{if $_message}
	<input type="submit" value=" 标记已读 " class="btn" onclick="this.form.action='?action=mark';"/> &nbsp; &nbsp;
	<input type="submit" value=" 全部已读 " class="btn" onclick="if(confirm('确定要标记全部信件为已读吗？此操作不可撤销')){this.form.action='?action=markall';}else{return false;}"/> &nbsp; &nbsp;
	{/if}
	<input type="submit" value=" 回收站 " class="btn_r" onclick="this.form.action='?action=delete&recycle=1';"/> &nbsp; &nbsp;
	<input type="submit" value=" 彻底删除 " class="btn_r" onclick="if(confirm('确定要删除选中信件吗？此操作不可撤销')){this.form.action='?action=delete';}else{return false;}"/> &nbsp; &nbsp;
{else}
	<input type="submit" value=" 彻底删除 " class="btn_r" onclick="if(confirm('确定要删除选中信件吗？此操作不可撤销')){this.form.action='?action=delete';}else{return false;}"/> &nbsp; &nbsp;
{/if}
</div>
</form>
</div>
{if $status==3}
{if $MG[inbox_limit]}
<div class="limit">收件箱容量 <span class="f_b f_red">{$MG[inbox_limit]}</span> 条&nbsp;&nbsp;&nbsp;当前接收 <span class="f_b">{$limit_used}</span> 条&nbsp;&nbsp;&nbsp;还可以接收 <span class="f_b f_blue">{$limit_free}</span> 条&nbsp;&nbsp;&nbsp;建议定期删除无用信件</div>
{/if}
{/if}
<div class="pages">{$pages}</div>
{/if}
<script type="text/javascript">s('message');m('{$menuid}');</script>
{template 'footer',$module}